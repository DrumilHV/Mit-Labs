<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Human Details</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  </head>
  <body>
    <h1>Human Details</h1>
    <select id="humanDropdown">
      {% for human in humans %}
      <option value="{{ human.id }}">{{ human.first_name }}</option>
      {% endfor %}</select
    ><br /><br />
    <form id="humanForm" method="post">
      {% csrf_token %} {{ form.as_p }}
      <button type="submit" id="updateBtn">Update</button>
      <button type="button" id="deleteBtn">Delete</button>
    </form>
    <script>
      $(document).ready(function () {
        $("#humanDropdown").change(function () {
          var humanId = $(this).val();
          $.ajax({
            url: "/update/" + humanId,
            type: "GET",
            success: function (data) {
              $("#id_first_name").val(data.first_name);
              $("#id_last_name").val(data.last_name);
              $("#id_phone").val(data.phone);
              $("#id_address").val(data.address);
              $("#id_city").val(data.city);
            },
          });
        });
        $("#updateBtn").click(function () {
          $("#humanForm").submit();
        });
        $("#deleteBtn").click(function () {
          var humanId = $("#humanDropdown").val();
          if (confirm("Are you sure you want to delete this record?")) {
            window.location.href = "/delete/" + humanId;
          }
        });
      });
    </script>
  </body>
</html>
